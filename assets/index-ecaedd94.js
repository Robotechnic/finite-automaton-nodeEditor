var At=Object.defineProperty;var Dt=(e,t,n)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>(Dt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function q(){}function Ot(e,t){for(const n in t)e[n]=t[n];return e}function ht(e){return e()}function Ke(){return Object.create(null)}function $(e){e.forEach(ht)}function gt(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ze;function je(e,t){return ze||(ze=document.createElement("a")),ze.href=t,e===ze.href}function Tt(e,t){return e!=e?t==t:e!==t}function zt(e){return Object.keys(e).length===0}function Le(e,...t){if(e==null)return q;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ce(e){let t;return Le(e,n=>t=n)(),t}function Z(e,t,n){e.$$.on_destroy.push(Le(t,n))}function Mt(e,t,n,o){if(e){const l=pt(e,t,n,o);return e[0](l)}}function pt(e,t,n,o){return e[1]&&o?Ot(n.ctx.slice(),e[1](o(t))):n.ctx}function It(e,t,n,o){if(e[2]&&o){const l=e[2](o(n));if(t.dirty===void 0)return l;if(typeof l=="object"){const r=[],i=Math.max(t.dirty.length,l.length);for(let a=0;a<i;a+=1)r[a]=t.dirty[a]|l[a];return r}return t.dirty|l}return t.dirty}function Bt(e,t,n,o,l,r){if(l){const i=pt(t,n,o,r);e.p(i,l)}}function Lt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function Qe(e){return e??""}function Q(e,t,n){return e.set(n),t}function m(e,t){e.appendChild(t)}function B(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function _t(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function oe(e){return document.createTextNode(e)}function A(){return oe(" ")}function mt(){return oe("")}function C(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Ne(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Jt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Je(e){return function(t){t.target===this&&e.call(this,t)}}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Rt(e){let t;return{p(...n){t=n,t.forEach(o=>e.push(o))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function qt(e){return Array.from(e.childNodes)}function Re(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ae(e,t){e.value=t??""}function Me(e,t,n,o){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function K(e,t,n){e.classList[n?"add":"remove"](t)}function Ut(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,o,t),l}let Ce;function Ee(e){Ce=e}function Ye(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function jt(e){Ye().$$.on_mount.push(e)}function Ft(e){Ye().$$.on_destroy.push(e)}function vt(){const e=Ye();return(t,n,{cancelable:o=!1}={})=>{const l=e.$$.callbacks[t];if(l){const r=Ut(t,n,{cancelable:o});return l.slice().forEach(i=>{i.call(e,r)}),!r.defaultPrevented}return!0}}function te(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const we=[],X=[];let Pe=[];const Fe=[],bt=Promise.resolve();let He=!1;function yt(){He||(He=!0,bt.then(wt))}function Ht(){return yt(),bt}function Xe(e){Pe.push(e)}function ge(e){Fe.push(e)}const Ue=new Set;let be=0;function wt(){if(be!==0)return;const e=Ce;do{try{for(;be<we.length;){const t=we[be];be++,Ee(t),Xt(t.$$)}}catch(t){throw we.length=0,be=0,t}for(Ee(null),we.length=0,be=0;X.length;)X.pop()();for(let t=0;t<Pe.length;t+=1){const n=Pe[t];Ue.has(n)||(Ue.add(n),n())}Pe.length=0}while(we.length);for(;Fe.length;)Fe.pop()();He=!1,Ue.clear(),Ee(e)}function Xt(e){if(e.fragment!==null){e.update(),$(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Xe)}}function Wt(e){const t=[],n=[];Pe.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),Pe=t}const Be=new Set;let me;function De(){me={r:0,c:[],p:me}}function Oe(){me.r||$(me.c),me=me.p}function O(e,t){e&&e.i&&(Be.delete(e),e.i(t))}function M(e,t,n,o){if(e&&e.o){if(Be.has(e))return;Be.add(e),me.c.push(()=>{Be.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function pe(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function V(e){e&&e.c()}function F(e,t,n,o){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),o||Xe(()=>{const i=e.$$.on_mount.map(ht).filter(gt);e.$$.on_destroy?e.$$.on_destroy.push(...i):$(i),e.$$.on_mount=[]}),r.forEach(Xe)}function H(e,t){const n=e.$$;n.fragment!==null&&(Wt(n.after_update),$(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Yt(e,t){e.$$.dirty[0]===-1&&(we.push(e),yt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,n,o,l,r,i,a=[-1]){const f=Ce;Ee(e);const u=e.$$={fragment:null,ctx:[],props:r,update:q,not_equal:l,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Ke(),dirty:a,skip_bound:!1,root:t.target||f.$$.root};i&&i(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(s,d,...g)=>{const p=g.length?g[0]:d;return u.ctx&&l(u.ctx[s],u.ctx[s]=p)&&(!u.skip_bound&&u.bound[s]&&u.bound[s](p),c&&Yt(e,s)),d}):[],u.update(),c=!0,$(u.before_update),u.fragment=o?o(u.ctx):!1,t.target){if(t.hydrate){const s=qt(t.target);u.fragment&&u.fragment.l(s),s.forEach(I)}else u.fragment&&u.fragment.c();t.intro&&O(e.$$.fragment),F(e,t.target,t.anchor,t.customElement),wt()}Ee(f)}class re{$destroy(){H(this,1),this.$destroy=q}$on(t,n){if(!gt(n))return q;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!zt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Vt(e){let t,n,o,l,r;return{c(){t=k("button"),n=k("img"),je(n.src,o=e[0])||_(n,"src",o),_(n,"alt",e[1]),_(n,"class","svelte-1w74acn"),_(t,"title",e[1]),_(t,"class","svelte-1w74acn")},m(i,a){B(i,t,a),m(t,n),l||(r=[C(t,"click",e[2]),C(t,"keypress",e[3])],l=!0)},p(i,[a]){a&1&&!je(n.src,o=i[0])&&_(n,"src",o),a&2&&_(n,"alt",i[1]),a&2&&_(t,"title",i[1])},i:q,o:q,d(i){i&&I(t),l=!1,$(r)}}}function Gt(e,t,n){let{src:o}=t,{label:l}=t;function r(a){te.call(this,e,a)}function i(a){te.call(this,e,a)}return e.$$set=a=>{"src"in a&&n(0,o=a.src),"label"in a&&n(1,l=a.label)},[o,l,r,i]}class Ie extends re{constructor(t){super(),se(this,t,Gt,Vt,Tt,{src:0,label:1})}}const ye=[];function le(e,t=q){let n;const o=new Set;function l(a){if(ie(e,a)&&(e=a,n)){const f=!ye.length;for(const u of o)u[1](),ye.push(u,e);if(f){for(let u=0;u<ye.length;u+=2)ye[u][0](ye[u+1]);ye.length=0}}}function r(a){l(a(e))}function i(a,f=q){const u=[a,f];return o.add(u),o.size===1&&(n=t(l)||q),a(e),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:i}}class qe{constructor(t,n,o=null){de(this,"_startPos");de(this,"_endPos");de(this,"_display",le(!0));de(this,"_svgPath");de(this,"startNode");de(this,"endNode");this.startNode=t,this.endNode=n,this._display.set(o??(t!==null&&n!==null)),this._startPos=le({x:0,y:0}),this._endPos=le({x:0,y:0}),this._svgPath=le(this.generateSvgPath())}initialised(){return this._startPos!==null&&this._endPos!==null}mousePos(t,n=!0){this.display=n,this.startNode!==null?this.endPoint=t:this.endNode!==null&&(this.startPoint=t)}update(t,n=!1){n?this.endPoint=t:this.startPoint=t}disconnect(){this.startNode=null,this.endNode=null}setStartNode(t){this.startNode=t}setEndNode(t){this.endNode!==null&&t===null&&(this.endNode.inputConnections=this.endNode.inputConnections.filter(n=>n!==this)),this.endNode=t}getStartNode(){return this.startNode}getEndNode(){return this.endNode}getStartPos(){return this._startPos}getEndPos(){return this._endPos}getDisplay(){return this._display}get startPoint(){return ce(this._startPos)}set startPoint(t){this.display&&(this._startPos.set(t),this._svgPath.set(this.generateSvgPath()))}get endPoint(){return ce(this._endPos)}set endPoint(t){this.display&&(this._endPos.set(t),this._svgPath.set(this.generateSvgPath()))}get display(){return ce(this._display)}set display(t){this._display.set(t)}generateSvgPath(){if(!this.initialised())return"";const t=Math.abs(this.endPoint.x-this.startPoint.x),n={x:this.startPoint.x+t*.5,y:this.startPoint.y},o={x:this.endPoint.x-t*.5,y:this.endPoint.y},l={x:this.endPoint.x,y:this.endPoint.y},r={x:this.startPoint.x+t*.1,y:this.startPoint.y};return`
			M ${this.startPoint.x} ${this.startPoint.y} 
			C ${n.x} ${n.y}, 
			  ${o.x} ${o.y},
			  ${l.x} ${l.y},
			  ${r.x} ${r.y},
			  ${this.endPoint.x} ${this.endPoint.y}
		`}getSvgPath(){return this._svgPath}}de(qe,"connectorRadius",10);const Ae=le({x:0,y:0}),Ze=le({x:0,y:0}),We=le({x:0,y:0}),he=le([]);function Kt(){const e=le([]),{subscribe:t,set:n,update:o}=e;function l(u){return ce(e).some(c=>c.name===u)}function r(){ce(e).forEach(u=>{u.events.forEach(c=>{c[1]!==null&&(c[1].setEndNode(null),c[1].setStartNode(null),c[1].display=!1)})}),n([])}function i(u){return 207.5+29*u.events.length}function a(u){const c=Math.max(234,u.name.length*15.80585);let s=0;return u.events.forEach(d=>{s=Math.max(s,d[0].length*9.92335)}),c+s}function f(u){let c=!1;return o(s=>(l(u.name)||(c=!0,s.push(u)),s)),c}return{subscribe:t,set:n,update:o,hasState:l,clearStore:r,computeTheoreticalHeight:i,computeTheoreticalWidth:a,createState:f,deleteStateByName(u){o(c=>c.filter(s=>s.name!==u))},deleteState(u){o(c=>c.filter(s=>s!==u?!0:(s.inputConnections.forEach(d=>{d.setEndNode(null),d.display=!1}),s.events.forEach(d=>{d[1]!==null&&(d[1].setEndNode(null),d[1].setStartNode(null),d[1].display=!1)}),!1)))},toJSON(){return{automaton:ce(e).map(u=>(u.name=u.name.slice(0,20),{name:u.name,entryNode:u.entryNode,events:u.events.map(c=>{var s;return{name:c[0],action:((s=c[1].getEndNode())==null?void 0:s.name)??null}}),position:u.position})),tests:ce(he)}},toAutomaton(){let u="",c="";return ce(e).forEach(s=>{s.entryNode&&(c+="->"+s.name+`
`),s.events.forEach(d=>{console.log(d),d[1]!==null?u+=`${s.name}:${d[0]}->${d[1].getEndNode().name}
`:u+=`${s.name}:${d[0]}->${s.name}
`})}),c===""?(alert("There is no entry point for the automaton!"),null):(ce(he).forEach(s=>{u+=":",s.input.forEach((d,g)=>{u+=d,g!==s.input.length-1&&(u+=",")}),u+=`->${s.expectedState}
`}),c+u)},fromJSON(u){r();const c=new Map,s={x:0,y:0};u.automaton.forEach(d=>{const g={name:d.name,entryNode:d.entryNode,events:d.events.map(p=>[p.name,null]),position:d.position,inputConnections:[]};c.set(g.name,g),f(g),s.x+=g.position.x+a(g)/2,s.y+=g.position.y+i(g)/2}),u.automaton.forEach(d=>{const g=c.get(d.name);for(let p=0;p<d.events.length;p++){const h=c.get(d.events[p].action);h!==void 0&&(g.events[p][1]=new qe(g,h),h.inputConnections.push(g.events[p][1]))}}),s.x/=u.automaton.length,s.y/=u.automaton.length,s.x*=-1,s.y*=-1,s.x+=window.innerWidth/2,s.y+=window.innerHeight/2,Ae.set(s),he.set(u.tests)}}}const Nt=le(null),ne=Kt();function Pt(e,t){if(!e)return;if(e.type!=="application/json"){alert("File is not a JSON file");return}const n=new FileReader;n.onload=o=>{try{const l=JSON.parse(o.target.result);t(l)}catch(l){console.error(l),alert("Error parsing JSON file")}},n.onerror=o=>{console.error(o),alert("Error parsing JSON file")},n.readAsText(e)}function Qt(e){let t,n,o,l,r,i,a,f,u;return n=new Ie({props:{src:"add.svg",label:"Add State"}}),n.$on("click",e[0]),l=new Ie({props:{src:"export.svg",label:"Save"}}),l.$on("click",e[1]),i=new Ie({props:{src:"open.svg",label:"Load"}}),i.$on("click",e[2]),f=new Ie({props:{src:"build.svg",label:"Build"}}),f.$on("click",e[3]),{c(){t=k("nav"),V(n.$$.fragment),o=A(),V(l.$$.fragment),r=A(),V(i.$$.fragment),a=A(),V(f.$$.fragment),_(t,"class","editor__navbar svelte-zybiqo")},m(c,s){B(c,t,s),F(n,t,null),m(t,o),F(l,t,null),m(t,r),F(i,t,null),m(t,a),F(f,t,null),u=!0},p:q,i(c){u||(O(n.$$.fragment,c),O(l.$$.fragment,c),O(i.$$.fragment,c),O(f.$$.fragment,c),u=!0)},o(c){M(n.$$.fragment,c),M(l.$$.fragment,c),M(i.$$.fragment,c),M(f.$$.fragment,c),u=!1},d(c){c&&I(t),H(n),H(l),H(i),H(f)}}}function $e(e,t,n){const o=new Blob([n],{type:t}),l=URL.createObjectURL(o),r=document.createElement("a");r.setAttribute("href",l),r.setAttribute("download",e),r.click()}function Zt(e,t,n){let o,l;Z(e,Ae,s=>n(5,o=s)),Z(e,ne,s=>n(6,l=s));const r=document.createElement("input");r.type="file",r.accept="application/json";function i(s){const d=s.target.files[0];Pt(d,ne.fromJSON)}jt(()=>{r.addEventListener("change",i)}),Ft(()=>{r.removeEventListener("change",i)});function a(){const s={name:"New_State "+l.length,entryNode:l.length===0,events:[],position:{x:window.innerWidth/2-o.x,y:window.innerHeight/2-o.y},inputConnections:[]};s.position.x-=ne.computeTheoreticalWidth(s)/2,s.position.y-=ne.computeTheoreticalHeight(s)/2,ne.createState(s)}function f(){const s=ne.toJSON();$e("automaton.json","application/json",JSON.stringify(s))}function u(){r.click()}function c(){const s=ne.toAutomaton();s!==null&&$e("automaton","text/plain",s)}return[a,f,u,c]}class $t extends re{constructor(t){super(),se(this,t,Zt,Qt,ie,{})}}const xt="/finite-automaton-nodeEditor/assets/trash-8bae477d.svg";function en(e){let t,n;const o=e[9].default,l=Mt(o,e,e[8],null);return{c(){t=k("div"),l&&l.c(),Me(t,"--pos-x",e[0].x+"px"),Me(t,"--pos-y",e[0].y+"px"),_(t,"class","svelte-1f65sma"),K(t,"active",e[1])},m(r,i){B(r,t,i),l&&l.m(t,null),n=!0},p(r,[i]){l&&l.p&&(!n||i&256)&&Bt(l,o,r,r[8],n?It(o,r[8],i,null):Lt(r[8]),null),(!n||i&1)&&Me(t,"--pos-x",r[0].x+"px"),(!n||i&1)&&Me(t,"--pos-y",r[0].y+"px"),(!n||i&2)&&K(t,"active",r[1])},i(r){n||(O(l,r),n=!0)},o(r){M(l,r),n=!1},d(r){r&&I(t),l&&l.d(r)}}}function tn(e,t,n){let{$$slots:o={},$$scope:l}=t;const r=vt();let{position:i={x:0,y:0}}=t,{mouseDelta:a={x:0,y:0}}=t,{active:f=!1}=t;function u(p){n(2,a={x:p.clientX-i.x,y:p.clientY-i.y}),n(1,f=!0)}function c(){return i}function s(){return f}function d(p,h){n(0,i={x:p-a.x,y:h-a.y}),r("move",i)}function g(){n(1,f=!1)}return e.$$set=p=>{"position"in p&&n(0,i=p.position),"mouseDelta"in p&&n(2,a=p.mouseDelta),"active"in p&&n(1,f=p.active),"$$scope"in p&&n(8,l=p.$$scope)},[i,f,a,u,c,s,d,g,l,o]}class St extends re{constructor(t){super(),se(this,t,tn,en,ie,{position:0,mouseDelta:2,active:1,mouseDown:3,getPosition:4,isActive:5,newMousePos:6,mouseUp:7})}get mouseDown(){return this.$$.ctx[3]}get getPosition(){return this.$$.ctx[4]}get isActive(){return this.$$.ctx[5]}get newMousePos(){return this.$$.ctx[6]}get mouseUp(){return this.$$.ctx[7]}}const G=le(null),kt=new Image;kt.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function nn(e){let t,n,o,l,r;return{c(){t=k("div"),n=oe("Â "),_(t,"class",o=Qe(e[0])+" svelte-sapybo"),_(t,"draggable","true"),K(t,"active",e[2])},m(i,a){B(i,t,a),m(t,n),e[14](t),l||(r=[C(t,"dragend",Ne(e[6])),C(t,"drag",e[4]),C(t,"dragstart",e[3]),C(t,"dragover",Ne(e[15])),C(t,"dragleave",Ne(e[16])),C(t,"dragenter",Ne(e[17])),C(t,"drop",e[5])],l=!0)},p(i,[a]){a&1&&o!==(o=Qe(i[0])+" svelte-sapybo")&&_(t,"class",o),a&5&&K(t,"active",i[2])},i:q,o:q,d(i){i&&I(t),e[14](null),l=!1,$(r)}}}function on(e,t,n){let o,l,r;Z(e,G,y=>n(18,o=y)),Z(e,We,y=>n(19,l=y)),Z(e,Ae,y=>n(20,r=y));let i=null,{eventName:a}=t,{parentNode:f}=t,{connection:u=null}=t,{position:c}=t,s=!1;function d(y){f.events.map(T=>(T[0]===a&&(T[1]=y),T))}function g(y){n(7,f.inputConnections=f.inputConnections.filter(T=>T!==y),f)}function p(){if(i===null)return;const y=i.getBoundingClientRect();return{x:y.x+y.width/2-r.x,y:y.y+y.height/2-r.y}}function h(){const y=p();if(y)if(c==="right"){if(u===null||u[1]===null)return;u[1].update(y,!1)}else f.inputConnections.forEach(T=>{T.update(y,!0)})}function P(y){y.dataTransfer.setDragImage(kt,0,0);const T=p();return c==="left"?(f.inputConnections.length==0?(Q(G,o=new qe(null,f),o),console.log("Init left connection",T)):(Q(G,o=f.inputConnections[f.inputConnections.length-1],o),o.setEndNode(null),console.log("Break a right connection",T)),!1):(Q(G,o=u[1],o),o.setStartNode(f),o.setEndNode(null),console.log("Init right connection",T),Q(G,o.display=!0,o),o.update({x:T.x,y:T.y},!0),o.update({x:T.x,y:T.y},!1),!1)}function N(){o!==null&&o.mousePos(l)}function v(){o!==null&&(o.getStartNode()!==null&&c==="left"?(console.log("Connection successfully created right to left"),o.setEndNode(f),o.update(p(),!0),f.inputConnections.push(o)):o.getEndNode()!==null&&c==="right"?(console.log("Connection successfully created left to right"),o.setStartNode(f),o.update(p(),!1)):(console.log("Connection cancelled"),Q(G,o.display=!1,o)),Q(G,o=null,o),n(2,s=!1))}function U(){o!==null&&(console.log("Connection cancelled"),Q(G,o.display=!1,o),Q(G,o=null,o))}function R(y){X[y?"unshift":"push"](()=>{i=y,n(1,i)})}const W=()=>{n(2,s=!0)},E=()=>{n(2,s=!1)},b=()=>{n(2,s=!0)};return e.$$set=y=>{"eventName"in y&&n(8,a=y.eventName),"parentNode"in y&&n(7,f=y.parentNode),"connection"in y&&n(9,u=y.connection),"position"in y&&n(0,c=y.position)},e.$$.update=()=>{e.$$.dirty&128&&(f.position,h())},[c,i,s,P,N,v,U,f,a,u,d,g,p,h,R,W,E,b]}class Et extends re{constructor(t){super(),se(this,t,on,nn,ie,{eventName:8,parentNode:7,connection:9,position:0,addConnection:10,removeInputConnection:11,getPos:12,update:13})}get addConnection(){return this.$$.ctx[10]}get removeInputConnection(){return this.$$.ctx[11]}get getPos(){return this.$$.ctx[12]}get update(){return this.$$.ctx[13]}}function xe(e){let t;return{c(){t=_t("path"),_(t,"d",e[6]),_(t,"stroke",e[0]),_(t,"stroke-linecap",e[1]),_(t,"stroke-width",e[2]),_(t,"fill","none")},m(n,o){B(n,t,o)},p(n,o){o&64&&_(t,"d",n[6]),o&1&&_(t,"stroke",n[0]),o&2&&_(t,"stroke-linecap",n[1]),o&4&&_(t,"stroke-width",n[2])},d(n){n&&I(t)}}}function ln(e){let t,n=e[5]&&xe(e);return{c(){n&&n.c(),t=mt()},m(o,l){n&&n.m(o,l),B(o,t,l)},p(o,[l]){o[5]?n?n.p(o,l):(n=xe(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){n&&n.d(o),o&&I(t)}}}function sn(e,t,n){let o,l=q,r=()=>(l(),l=Le(p,h=>n(5,o=h)),p),i,a=q,f=()=>(a(),a=Le(g,h=>n(6,i=h)),g);e.$$.on_destroy.push(()=>l()),e.$$.on_destroy.push(()=>a());let{connection:u}=t,{color:c="black"}=t,{lineCap:s="round"}=t,{lineStroke:d=2}=t,g=u==null?void 0:u.getSvgPath();f();let p=u==null?void 0:u.getDisplay();return r(),e.$$set=h=>{"connection"in h&&n(7,u=h.connection),"color"in h&&n(0,c=h.color),"lineCap"in h&&n(1,s=h.lineCap),"lineStroke"in h&&n(2,d=h.lineStroke)},e.$$.update=()=>{e.$$.dirty&128&&(f(n(3,g=u==null?void 0:u.getSvgPath())),r(n(4,p=u==null?void 0:u.getDisplay())))},[c,s,d,g,p,o,i,u]}class rn extends re{constructor(t){super(),se(this,t,sn,ln,ie,{connection:7,color:0,lineCap:1,lineStroke:2})}}function et(e,t,n){const o=e.slice();return o[19]=t[n],o}function tt(e,t,n){const o=e.slice();return o[22]=t[n],o[23]=t,o[24]=n,o}function nt(e,t,n){const o=e.slice();return o[22]=t[n],o[25]=t,o[24]=n,o}function un(e){let t=e[0].name+"",n;return{c(){n=oe(t)},m(o,l){B(o,n,l)},p(o,l){l&1&&t!==(t=o[0].name+"")&&Re(n,t)},d(o){o&&I(n)}}}function an(e){let t;return{c(){t=k("span"),t.textContent="Invalid name",_(t,"class","invalid svelte-hz544v")},m(n,o){B(n,t,o)},p:q,d(n){n&&I(t)}}}function ot(e){let t,n,o,l,r,i,a,f,u;function c(){e[11].call(n,e[25],e[24])}function s(){return e[12](e[24])}return{c(){t=k("div"),n=k("input"),o=A(),l=k("button"),r=k("img"),a=A(),_(n,"type","text"),_(n,"name","outputs"),_(n,"id","outputs"),_(n,"class","svelte-hz544v"),K(n,"invalid",e[0].events.length===0),je(r.src,i=xt)||_(r,"src",i),_(r,"alt","trash"),_(r,"class","svelte-hz544v"),_(l,"class","svelte-hz544v"),_(t,"class","node__outputs__events svelte-hz544v")},m(d,g){B(d,t,g),m(t,n),ae(n,e[22][0]),m(t,o),m(t,l),m(l,r),m(t,a),f||(u=[C(n,"input",c),C(l,"click",s)],f=!0)},p(d,g){e=d,g&1&&n.value!==e[22][0]&&ae(n,e[22][0]),g&1&&K(n,"invalid",e[0].events.length===0)},d(d){d&&I(t),f=!1,$(u)}}}function lt(e){let t,n,o=e[22][0]+"",l,r,i,a,f,u,c,s,d;function g(N){e[13](N,e[22])}function p(N){e[14](N,e[22],e[23],e[24])}function h(N){e[15](N)}let P={position:"right"};return e[22][0]!==void 0&&(P.eventName=e[22][0]),e[22]!==void 0&&(P.connection=e[22]),e[0]!==void 0&&(P.parentNode=e[0]),i=new Et({props:P}),X.push(()=>pe(i,"eventName",g)),X.push(()=>pe(i,"connection",p)),X.push(()=>pe(i,"parentNode",h)),{c(){t=k("div"),n=k("span"),l=oe(o),r=A(),V(i.$$.fragment),c=A(),_(n,"class","svelte-hz544v"),_(t,"class","node__outputsConnectors__connector svelte-hz544v"),_(t,"id",s="connector-"+(e[0].name+e[22][0]+e[24]))},m(N,v){B(N,t,v),m(t,n),m(n,l),m(t,r),F(i,t,null),m(t,c),d=!0},p(N,v){e=N,(!d||v&1)&&o!==(o=e[22][0]+"")&&Re(l,o);const U={};!a&&v&1&&(a=!0,U.eventName=e[22][0],ge(()=>a=!1)),!f&&v&1&&(f=!0,U.connection=e[22],ge(()=>f=!1)),!u&&v&1&&(u=!0,U.parentNode=e[0],ge(()=>u=!1)),i.$set(U),(!d||v&1&&s!==(s="connector-"+(e[0].name+e[22][0]+e[24])))&&_(t,"id",s)},i(N){d||(O(i.$$.fragment,N),d=!0)},o(N){M(i.$$.fragment,N),d=!1},d(N){N&&I(t),H(i)}}}function cn(e){let t,n,o,l,r,i,a,f,u,c,s,d,g=!1,p,h,P,N,v,U,R,W,E,b,y,T,x,w,D,j,fe,Ve;n=new Et({props:{position:"left",eventName:"input",parentNode:e[0]}});function Ge(S,J){return S[0].name.length===0?an:un}let Te=Ge(e),ue=Te(e),ve=e[0].events,Y=[];for(let S=0;S<ve.length;S+=1)Y[S]=ot(nt(e,ve,S));let _e=e[0].events,L=[];for(let S=0;S<_e.length;S+=1)L[S]=lt(tt(e,_e,S));const Ct=S=>M(L[S],1,1,()=>{L[S]=null});return j=Rt(e[9][0]),{c(){t=k("div"),V(n.$$.fragment),o=A(),l=k("h2"),ue.c(),r=A(),i=k("button"),i.textContent="Delete this node",a=A(),f=k("div"),u=k("label"),u.textContent="Entry node:",c=A(),s=k("input"),p=A(),h=k("div"),P=k("label"),P.textContent="Name:",N=A(),v=k("input"),U=A(),R=k("div"),W=k("label"),W.textContent="Outputs events:",E=A(),b=k("button"),b.textContent="Add",y=A();for(let S=0;S<Y.length;S+=1)Y[S].c();T=A(),x=k("div");for(let S=0;S<L.length;S+=1)L[S].c();_(l,"class","svelte-hz544v"),_(i,"class","node__delete svelte-hz544v"),_(u,"for","entryNode"),_(u,"class","svelte-hz544v"),_(s,"type","radio"),_(s,"name","entryNode"),s.__value=d="entryNoode-"+e[0].name,s.value=s.__value,_(f,"class","node_entryNode"),_(P,"for","name"),_(P,"class","svelte-hz544v"),_(v,"type","text"),_(v,"name","name"),_(v,"id","name"),_(v,"class","svelte-hz544v"),K(v,"invalid",e[0].name.length===0),_(h,"class","node__name"),_(W,"for","outputs"),_(W,"class","svelte-hz544v"),_(b,"class","svelte-hz544v"),_(R,"class","node__outputs svelte-hz544v"),_(x,"class","node__outputsConnectors svelte-hz544v"),_(t,"class","node svelte-hz544v"),_(t,"id",w="node-"+e[0].name),j.p(s)},m(S,J){B(S,t,J),F(n,t,null),m(t,o),m(t,l),ue.m(l,null),m(t,r),m(t,i),m(t,a),m(t,f),m(f,u),m(f,c),m(f,s),s.checked=s.__value===e[1],m(t,p),m(t,h),m(h,P),m(h,N),m(h,v),ae(v,e[0].name),m(t,U),m(t,R),m(R,W),m(R,E),m(R,b),m(R,y);for(let ee=0;ee<Y.length;ee+=1)Y[ee]&&Y[ee].m(R,null);m(t,T),m(t,x);for(let ee=0;ee<L.length;ee+=1)L[ee]&&L[ee].m(x,null);D=!0,fe||(Ve=[C(i,"click",e[7]),C(s,"change",e[8]),C(v,"input",e[10]),C(b,"click",e[5]),C(t,"mousedown",Je(e[3])),C(t,"mouseup",Je(e[4]))],fe=!0)},p(S,J){const ee={};if(J&1&&(ee.parentNode=S[0]),n.$set(ee),Te===(Te=Ge(S))&&ue?ue.p(S,J):(ue.d(1),ue=Te(S),ue&&(ue.c(),ue.m(l,null))),(!D||J&1&&d!==(d="entryNoode-"+S[0].name))&&(s.__value=d,s.value=s.__value,g=!0),(g||J&2)&&(s.checked=s.__value===S[1]),J&1&&v.value!==S[0].name&&ae(v,S[0].name),(!D||J&1)&&K(v,"invalid",S[0].name.length===0),J&65){ve=S[0].events;let z;for(z=0;z<ve.length;z+=1){const ke=nt(S,ve,z);Y[z]?Y[z].p(ke,J):(Y[z]=ot(ke),Y[z].c(),Y[z].m(R,null))}for(;z<Y.length;z+=1)Y[z].d(1);Y.length=ve.length}if(J&1){_e=S[0].events;let z;for(z=0;z<_e.length;z+=1){const ke=tt(S,_e,z);L[z]?(L[z].p(ke,J),O(L[z],1)):(L[z]=lt(ke),L[z].c(),O(L[z],1),L[z].m(x,null))}for(De(),z=_e.length;z<L.length;z+=1)Ct(z);Oe()}(!D||J&1&&w!==(w="node-"+S[0].name))&&_(t,"id",w)},i(S){if(!D){O(n.$$.fragment,S);for(let J=0;J<_e.length;J+=1)O(L[J]);D=!0}},o(S){M(n.$$.fragment,S),L=L.filter(Boolean);for(let J=0;J<L.length;J+=1)M(L[J]);D=!1},d(S){S&&I(t),H(n),ue.d(),Se(Y,S),Se(L,S),j.r(),fe=!1,$(Ve)}}}function it(e){let t,n;return t=new rn({props:{connection:e[19][1]}}),{c(){V(t.$$.fragment)},m(o,l){F(t,o,l),n=!0},p(o,l){const r={};l&1&&(r.connection=o[19][1]),t.$set(r)},i(o){n||(O(t.$$.fragment,o),n=!0)},o(o){M(t.$$.fragment,o),n=!1},d(o){H(t,o)}}}function fn(e){let t,n,o,l,r;function i(s){e[17](s)}let a={$$slots:{default:[cn]},$$scope:{ctx:e}};e[0].position!==void 0&&(a.position=e[0].position),t=new St({props:a}),e[16](t),X.push(()=>pe(t,"position",i));let f=e[0].events,u=[];for(let s=0;s<f.length;s+=1)u[s]=it(et(e,f,s));const c=s=>M(u[s],1,1,()=>{u[s]=null});return{c(){V(t.$$.fragment),o=A(),l=_t("svg");for(let s=0;s<u.length;s+=1)u[s].c();_(l,"class","svelte-hz544v")},m(s,d){F(t,s,d),B(s,o,d),B(s,l,d);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(l,null);r=!0},p(s,[d]){const g={};if(d&67108867&&(g.$$scope={dirty:d,ctx:s}),!n&&d&1&&(n=!0,g.position=s[0].position,ge(()=>n=!1)),t.$set(g),d&1){f=s[0].events;let p;for(p=0;p<f.length;p+=1){const h=et(s,f,p);u[p]?(u[p].p(h,d),O(u[p],1)):(u[p]=it(h),u[p].c(),O(u[p],1),u[p].m(l,null))}for(De(),p=f.length;p<u.length;p+=1)c(p);Oe()}},i(s){if(!r){O(t.$$.fragment,s);for(let d=0;d<f.length;d+=1)O(u[d]);r=!0}},o(s){M(t.$$.fragment,s),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)M(u[d]);r=!1},d(s){e[16](null),H(t,s),s&&I(o),s&&I(l),Se(u,s)}}}function st(e){return e.length===0?[!1,""]:e.includes(" ")?[!1,e.replace(" ","_")]:e.length>20?[!1,e.slice(0,20)]:[!0,e]}function dn(e,t,n){let o;Z(e,G,E=>n(18,o=E));let l=null,{value:r}=t,i="";function a(E){Nt.set({isActive:l.isActive,newMousePos:l.newMousePos}),l.mouseDown(E)}function f(){l.mouseUp(),o&&(Q(G,o.display=!1,o),Q(G,o=null,o))}function u(){n(0,r.events=[...r.events,[String(r.events.length),new qe(null,null)]],r)}function c(E){r.events[E][1].setEndNode(null),n(0,r.events=r.events.slice(0,E).concat(r.events.slice(E+1)),r)}function s(){confirm("Are you sure you want to delete this node?")&&ne.deleteState(r)}const d=[[]];function g(){i=this.__value,n(1,i)}function p(){r.name=this.value,n(0,r),n(1,i)}function h(E,b){E[b][0]=this.value,n(0,r),n(1,i)}const P=E=>c(E);function N(E,b){e.$$.not_equal(b[0],E)&&(b[0]=E,n(0,r),n(1,i))}function v(E,b,y,T){y[T]=E,n(0,r),n(1,i)}function U(E){r=E,n(0,r),n(1,i)}function R(E){X[E?"unshift":"push"](()=>{l=E,n(2,l)})}function W(E){e.$$.not_equal(r.position,E)&&(r.position=E,n(0,r),n(1,i))}return e.$$set=E=>{"value"in E&&n(0,r=E.value)},e.$$.update=()=>{if(e.$$.dirty&3&&n(0,r.entryNode=i==="entryNoode-"+r.name,r),e.$$.dirty&1){const[E,b]=st(r.name);!E&&b.length>0&&n(0,r.name=b,r)}e.$$.dirty&1&&r.events.forEach(E=>{const[b,y]=st(E[0]);!b&&y.length>0&&(E[0]=y)})},[r,i,l,a,f,u,c,s,g,d,p,h,P,N,v,U,R,W]}class hn extends re{constructor(t){super(),se(this,t,dn,fn,ie,{value:0})}}function gn(e){let t,n,o,l,r,i,a,f,u;return{c(){t=k("div"),n=k("span"),o=oe(e[0]),l=A(),r=k("input"),i=A(),a=k("button"),a.textContent="X",_(r,"placeholder",e[1]),_(r,"class","svelte-13cna8c"),_(n,"class","svelte-13cna8c"),_(a,"class","svelte-13cna8c"),_(t,"class","tag svelte-13cna8c"),_(t,"draggable","true")},m(c,s){B(c,t,s),m(t,n),m(n,o),m(n,l),m(n,r),ae(r,e[0]),m(t,i),m(t,a),f||(u=[C(r,"input",e[13]),C(r,"keydown",e[9]),C(r,"keyup",e[10]),C(r,"input",e[11]),C(r,"blur",e[12]),C(a,"click",e[2]),C(t,"dragstart",e[3]),C(t,"drag",e[4]),C(t,"dragenter",e[5]),C(t,"dragleave",e[6]),C(t,"dragend",e[7]),C(t,"dragover",e[8])],f=!0)},p(c,[s]){s&1&&Re(o,c[0]),s&2&&_(r,"placeholder",c[1]),s&1&&r.value!==c[0]&&ae(r,c[0])},i:q,o:q,d(c){c&&I(t),f=!1,$(u)}}}function pn(e,t,n){let{value:o}=t,{placeholder:l=""}=t;const r=vt();function i(){r("close")}function a(v){te.call(this,e,v)}function f(v){te.call(this,e,v)}function u(v){te.call(this,e,v)}function c(v){te.call(this,e,v)}function s(v){te.call(this,e,v)}function d(v){te.call(this,e,v)}function g(v){te.call(this,e,v)}function p(v){te.call(this,e,v)}function h(v){te.call(this,e,v)}function P(v){te.call(this,e,v)}function N(){o=this.value,n(0,o)}return e.$$set=v=>{"value"in v&&n(0,o=v.value),"placeholder"in v&&n(1,l=v.placeholder)},[o,l,i,a,f,u,c,s,d,g,p,h,P,N]}class _n extends re{constructor(t){super(),se(this,t,pn,gn,ie,{value:0,placeholder:1})}}function rt(e,t,n){const o=e.slice();return o[24]=t[n],o[25]=t,o[26]=n,o}function ut(e){let t,n,o;function l(c){e[13](c,e[24],e[25],e[26])}function r(){return e[14](e[26])}function i(){return e[15](e[24])}function a(){return e[16](e[26])}function f(...c){return e[17](e[26],...c)}let u={};return e[24]!==void 0&&(u.value=e[24]),t=new _n({props:u}),X.push(()=>pe(t,"value",l)),t.$on("input",r),t.$on("keydown",e[7](e[26])),t.$on("close",i),t.$on("dragstart",a),t.$on("dragover",f),t.$on("dragend",e[11]),{c(){V(t.$$.fragment)},m(c,s){F(t,c,s),o=!0},p(c,s){e=c;const d={};!n&&s&1&&(n=!0,d.value=e[24],ge(()=>n=!1)),t.$set(d)},i(c){o||(O(t.$$.fragment,c),o=!0)},o(c){M(t.$$.fragment,c),o=!1},d(c){H(t,c)}}}function mn(e){let t,n,o,l,r,i,a,f,u,c,s,d=e[0],g=[];for(let h=0;h<d.length;h+=1)g[h]=ut(rt(e,d,h));const p=h=>M(g[h],1,1,()=>{g[h]=null});return{c(){t=k("div"),n=k("div");for(let h=0;h<g.length;h+=1)g[h].c();o=A(),l=k("span"),r=oe(e[3]),i=A(),a=k("input"),_(a,"type","text"),_(a,"placeholder",f=e[0].length===0?e[1]:""),_(a,"id",e[2]),_(a,"class","svelte-18pl5a"),_(l,"class","tagInput__tagContener__input svelte-18pl5a"),_(n,"class","tagInput__tagContener svelte-18pl5a"),_(t,"class","tagInput svelte-18pl5a")},m(h,P){B(h,t,P),m(t,n);for(let N=0;N<g.length;N+=1)g[N]&&g[N].m(n,null);m(n,o),m(n,l),m(l,r),m(l,i),m(l,a),ae(a,e[3]),e[19](a),e[20](n),u=!0,c||(s=[C(a,"input",e[18]),C(a,"keydown",e[8]),C(a,"input",e[12])],c=!0)},p(h,[P]){if(P&3777){d=h[0];let N;for(N=0;N<d.length;N+=1){const v=rt(h,d,N);g[N]?(g[N].p(v,P),O(g[N],1)):(g[N]=ut(v),g[N].c(),O(g[N],1),g[N].m(n,o))}for(De(),N=d.length;N<g.length;N+=1)p(N);Oe()}(!u||P&8)&&Re(r,h[3]),(!u||P&3&&f!==(f=h[0].length===0?h[1]:""))&&_(a,"placeholder",f),(!u||P&4)&&_(a,"id",h[2]),P&8&&a.value!==h[3]&&ae(a,h[3])},i(h){if(!u){for(let P=0;P<d.length;P+=1)O(g[P]);u=!0}},o(h){g=g.filter(Boolean);for(let P=0;P<g.length;P+=1)M(g[P]);u=!1},d(h){h&&I(t),Se(g,h),e[19](null),e[20](null),c=!1,$(s)}}}function vn(e,t,n){let{tags:o}=t,{placeholder:l=""}=t,{id:r}=t,i="",a,f,u=null;function c(w){return f.children[w].children[0].children[0]}function s(w,D){const j=c(w);setTimeout(()=>{j.focus(),j.setSelectionRange(D,D)},10)}function d(w){o[w].length===0&&(n(0,o=o.filter((D,j)=>j!==w)),o.length===0?a.focus():w>0?s(w-1,o[w-1].length+1):s(0,o[0].length+1)),o[w].length>20&&n(0,o[w]=o[w].slice(0,20),o)}function g(w){return D=>{if(D.key===" "){D.stopPropagation(),D.preventDefault();return}const j=D.currentTarget;if(D.key==="ArrowLeft"&&j.selectionStart===0&&w>0&&s(w-1,o[w-1].length+1),D.key==="ArrowRight"){const fe=j.selectionStart===j.value.length;w<o.length-1?fe&&s(w+1,0):fe&&setTimeout(()=>{a.focus(),a.setSelectionRange(0,0)},10)}}}function p(w){if((w.key===" "||w.key==="Enter")&&i.length>0&&(n(0,o=[...o,i]),n(3,i=""),w.stopPropagation(),w.preventDefault()),(w.key==="Backspace"||w.key==="ArrowLeft")&&a.selectionStart===0&&o.length>0){const D=c(o.length-1),j=o[o.length-1].length+1;setTimeout(()=>{D.focus(),D.setSelectionRange(j,j)},10)}}function h(w){u={i:w,tag:o[w]}}function P(w,D){w.preventDefault(),u&&u.i!==D&&(n(0,o=o.filter(j=>j!==u.tag)),n(0,o=[...o.slice(0,D),u.tag,...o.slice(D)]),u.i=D,s(D,u.tag.length+1))}function N(){u=null}function v(){i.length>20&&n(3,i=i.slice(0,20))}function U(w,D,j,fe){j[fe]=w,n(0,o)}const R=w=>d(w),W=w=>n(0,o=o.filter(D=>D!==w)),E=w=>h(w),b=(w,D)=>P(D,w);function y(){i=this.value,n(3,i)}function T(w){X[w?"unshift":"push"](()=>{a=w,n(4,a)})}function x(w){X[w?"unshift":"push"](()=>{f=w,n(5,f)})}return e.$$set=w=>{"tags"in w&&n(0,o=w.tags),"placeholder"in w&&n(1,l=w.placeholder),"id"in w&&n(2,r=w.id)},[o,l,r,i,a,f,d,g,p,h,P,N,v,U,R,W,E,b,y,T,x]}class bn extends re{constructor(t){super(),se(this,t,vn,mn,ie,{tags:0,placeholder:1,id:2})}}function at(e,t,n){const o=e.slice();return o[8]=t[n],o[9]=t,o[10]=n,o}function ct(e){let t,n,o,l,r,i,a,f,u,c,s,d,g,p,h,P,N,v,U,R;function W(y){e[5](y,e[8])}let E={id:"testInput-"+e[10]};e[8].input!==void 0&&(E.tags=e[8].input),i=new bn({props:E}),X.push(()=>pe(i,"tags",W));function b(){e[6].call(s,e[9],e[10])}return{c(){t=k("div"),n=k("label"),o=oe("Input for test "),l=oe(e[10]),r=A(),V(i.$$.fragment),f=A(),u=k("label"),u.textContent="Expected state",c=A(),s=k("input"),d=A(),g=k("button"),p=oe("Remove test "),h=oe(e[10]),P=A(),N=k("hr"),_(n,"for","testInput-"+e[10]),_(u,"for","test-"+e[10]),_(s,"id","test-"+e[10]),_(s,"type","text"),_(s,"class","svelte-gteez4"),_(g,"class","svelte-gteez4")},m(y,T){B(y,t,T),m(t,n),m(n,o),m(n,l),m(t,r),F(i,t,null),m(t,f),m(t,u),m(t,c),m(t,s),ae(s,e[8].expectedState),m(t,d),m(t,g),m(g,p),m(g,h),B(y,P,T),B(y,N,T),v=!0,U||(R=[C(s,"input",b),C(g,"click",e[4](e[10]))],U=!0)},p(y,T){e=y;const x={};!a&&T&4&&(a=!0,x.tags=e[8].input,ge(()=>a=!1)),i.$set(x),T&4&&s.value!==e[8].expectedState&&ae(s,e[8].expectedState)},i(y){v||(O(i.$$.fragment,y),v=!0)},o(y){M(i.$$.fragment,y),v=!1},d(y){y&&I(t),H(i),y&&I(P),y&&I(N),U=!1,$(R)}}}function yn(e){let t,n,o,l,r,i,a,f,u=e[2],c=[];for(let d=0;d<u.length;d+=1)c[d]=ct(at(e,u,d));const s=d=>M(c[d],1,1,()=>{c[d]=null});return{c(){t=k("nav"),n=k("h2"),n.textContent="Tests cases",o=A();for(let d=0;d<c.length;d+=1)c[d].c();l=A(),r=k("button"),r.textContent="Create a new test",_(n,"class","svelte-gteez4"),_(r,"class","svelte-gteez4"),_(t,"class","test svelte-gteez4"),K(t,"display",e[0])},m(d,g){B(d,t,g),m(t,n),m(t,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);m(t,l),m(t,r),e[7](t),i=!0,a||(f=C(r,"click",e[3]),a=!0)},p(d,[g]){if(g&20){u=d[2];let p;for(p=0;p<u.length;p+=1){const h=at(d,u,p);c[p]?(c[p].p(h,g),O(c[p],1)):(c[p]=ct(h),c[p].c(),O(c[p],1),c[p].m(t,l))}for(De(),p=u.length;p<c.length;p+=1)s(p);Oe()}(!i||g&1)&&K(t,"display",d[0])},i(d){if(!i){for(let g=0;g<u.length;g+=1)O(c[g]);i=!0}},o(d){c=c.filter(Boolean);for(let g=0;g<c.length;g+=1)M(c[g]);i=!1},d(d){d&&I(t),Se(c,d),e[7](null),a=!1,f()}}}function wn(e,t,n){let o;Z(e,he,s=>n(2,o=s));let{display:l}=t,r;function i(){he.update(s=>(s.push({input:[],expectedState:""}),s)),Ht().then(()=>{n(1,r.scrollTop=r.scrollHeight,r)})}function a(s){return()=>{he.update(d=>(d.splice(s,1),d))}}function f(s,d){e.$$.not_equal(d.input,s)&&(d.input=s,he.set(o))}function u(s,d){s[d].expectedState=this.value,he.set(o)}function c(s){X[s?"unshift":"push"](()=>{r=s,n(1,r)})}return e.$$set=s=>{"display"in s&&n(0,l=s.display)},[l,r,o,i,a,f,u,c]}class Nn extends re{constructor(t){super(),se(this,t,wn,yn,ie,{display:0})}}function ft(e,t,n){const o=e.slice();return o[20]=t[n],o[21]=t,o[22]=n,o}function dt(e){let t,n,o;function l(i){e[13](i,e[20],e[21],e[22])}let r={};return e[20]!==void 0&&(r.value=e[20]),t=new hn({props:r}),X.push(()=>pe(t,"value",l)),{c(){V(t.$$.fragment)},m(i,a){F(t,i,a),o=!0},p(i,a){e=i;const f={};!n&&a&16&&(n=!0,f.value=e[20],ge(()=>n=!1)),t.$set(f)},i(i){o||(O(t.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),o=!1},d(i){H(t,i)}}}function Pn(e){let t,n,o=e[4],l=[];for(let i=0;i<o.length;i+=1)l[i]=dt(ft(e,o,i));const r=i=>M(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=mt()},m(i,a){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(i,a);B(i,t,a),n=!0},p(i,a){if(a&16){o=i[4];let f;for(f=0;f<o.length;f+=1){const u=ft(i,o,f);l[f]?(l[f].p(u,a),O(l[f],1)):(l[f]=dt(u),l[f].c(),O(l[f],1),l[f].m(t.parentNode,t))}for(De(),f=o.length;f<l.length;f+=1)r(f);Oe()}},i(i){if(!n){for(let a=0;a<o.length;a+=1)O(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)M(l[a]);n=!1},d(i){Se(l,i),i&&I(t)}}}function Sn(e){let t,n,o,l,r,i,a,f,u,c,s,d;l=new $t({}),i=new Nn({props:{display:!0}});function g(h){e[15](h)}let p={$$slots:{default:[Pn]},$$scope:{ctx:e}};return e[3]!==void 0&&(p.position=e[3]),f=new St({props:p}),e[14](f),X.push(()=>pe(f,"position",g)),{c(){t=k("section"),t.innerHTML='<div class="fileDragOverlay__content svelte-nmbowb"><h1>Drop your file here to open it</h1></div>',n=A(),o=k("section"),V(l.$$.fragment),r=A(),V(i.$$.fragment),a=A(),V(f.$$.fragment),_(t,"class","fileDragOverlay svelte-nmbowb"),K(t,"active",e[2]),_(o,"class","editor svelte-nmbowb"),K(o,"active",e[1])},m(h,P){B(h,t,P),B(h,n,P),B(h,o,P),F(l,o,null),m(o,r),F(i,o,null),m(o,a),F(f,o,null),c=!0,s||(d=[C(window,"mousemove",e[5]),C(window,"dragenter",e[10]),C(window,"dragleave",e[11]),C(window,"dragover",e[5]),C(t,"drop",Jt(Ne(e[9]))),C(t,"dragover",Ne(e[12])),C(o,"mousemove",e[6]),C(o,"mousedown",Je(e[7])),C(o,"mouseup",Je(e[8]))],s=!0)},p(h,[P]){(!c||P&4)&&K(t,"active",h[2]);const N={};P&8388624&&(N.$$scope={dirty:P,ctx:h}),!u&&P&8&&(u=!0,N.position=h[3],ge(()=>u=!1)),f.$set(N),(!c||P&2)&&K(o,"active",h[1])},i(h){c||(O(l.$$.fragment,h),O(i.$$.fragment,h),O(f.$$.fragment,h),c=!0)},o(h){M(l.$$.fragment,h),M(i.$$.fragment,h),M(f.$$.fragment,h),c=!1},d(h){h&&I(t),h&&I(n),h&&I(o),H(l),H(i),e[14](null),H(f),s=!1,$(d)}}}function kn(e,t,n){let o,l,r,i,a,f;Z(e,G,b=>n(16,o=b)),Z(e,Ae,b=>n(3,l=b)),Z(e,Nt,b=>n(17,r=b)),Z(e,We,b=>n(18,i=b)),Z(e,Ze,b=>n(19,a=b)),Z(e,ne,b=>n(4,f=b));let u=null,c=!1,s=!1;function d(b){Q(Ze,a={x:b.clientX,y:b.clientY},a),Q(We,i={x:b.clientX-l.x,y:b.clientY-l.y},i)}function g(b){if(r!=null&&r.isActive()){r.newMousePos(b.clientX,b.clientY);return}if(u.isActive()){u.newMousePos(b.clientX,b.clientY);return}o!==null&&o.mousePos({x:b.clientX-l.x,y:b.clientY-l.y},o.display)}function p(b){n(1,c=!0),u.mouseDown(b)}function h(b){n(1,c=!1),u.mouseUp(),o!==null&&(console.log("connection cancelled"),Q(G,o=null,o))}function P(b){n(2,s=!1);const y=b.dataTransfer.files[0];Pt(y,ne.fromJSON)}function N(b){b.dataTransfer.types.includes("Files")&&n(2,s=!0)}function v(){n(2,s=!1)}const U=b=>n(2,s=!0);function R(b,y,T,x){T[x]=b,ne.set(f)}function W(b){X[b?"unshift":"push"](()=>{u=b,n(0,u)})}function E(b){l=b,Ae.set(l)}return[u,c,s,l,f,d,g,p,h,P,N,v,U,R,W,E]}class En extends re{constructor(t){super(),se(this,t,kn,Sn,ie,{})}}function Cn(e){let t,n,o,l,r;return l=new En({}),{c(){t=k("main"),n=k("header"),n.innerHTML=`<h1 class="svelte-1mo23u5">Finite automaton editor</h1> 
	<nav class="svelte-1mo23u5"><a href="https://github.com/Robotechnic/finite-automaton" class="svelte-1mo23u5">About the language</a> 
		<a href="http://github.com" class="svelte-1mo23u5">Git Hub</a></nav>`,o=A(),V(l.$$.fragment),_(n,"class","svelte-1mo23u5")},m(i,a){B(i,t,a),m(t,n),m(t,o),F(l,t,null),r=!0},p:q,i(i){r||(O(l.$$.fragment,i),r=!0)},o(i){M(l.$$.fragment,i),r=!1},d(i){i&&I(t),H(l)}}}class An extends re{constructor(t){super(),se(this,t,null,Cn,ie,{})}}new An({target:document.getElementById("app")});
